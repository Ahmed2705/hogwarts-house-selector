<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hogwarts Sorting Ceremony Quiz</title>
    <link rel="icon" type="image/png" href="Pics/hp1.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Cinzel:wght@400..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<body>
    <div id="entry-screen">
        <h1 class="entry-text">Click anywhere to begin</h1>
    </div>

    <audio id="background-music" loop>
        <source src="Audio/hedwigs theme.mp3" type="audio/mp3">
    </audio>

    <audio id="background-music" loop>
    <source src="Audio/hedwigs theme.mp3" type="audio/mp3">
</audio>
    <div class="background-effects">
        <div class="sparkles">
            <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
            <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
            <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
            <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
            <div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div><div class="sparkle"></div>
        </div>
    </div>

    <div class="main-container">
        <div id="start-screen">
            <h1>The Sorting Ceremony</h1>
            <p>The Sorting Hat awaits. Answer its questions to discover your true house.</p>
            <button id="start-button">Begin the Sorting</button>
        </div>

        <div id="quiz-screen">
            <div id="question-container">
                <h2 id="question-text"></h2>
            </div>
            <div id="answer-buttons"></div>
        </div>

        <div id="ceremony-screen">
            <svg id="sorting-hat-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M95.8,61.4c-1.7-11.8-7.5-22.1-16.1-29.2c-4.3-3.5-9.1-6.1-14.1-7.9C62.1,19.2,58.8,15,53.2,15 c-7.4,0-7.3,6.8-7.3,6.8c-1.3,0.1-2.5,0.2-3.8,0.4C30.6,26.2,19.3,37.3,13,51.8c-2.4,5.4-3.5,11.2-3.5,17.1c0,1.9,0.1,3.7,0.4,5.5 h85.5C95.7,70.9,96.3,66.2,95.8,61.4z" fill="#5C3A21"/>
                <path d="M95.4,74.7H4.6c-1.4,0-2.6-1.2-2.6-2.6v-1.3c0-1.4,1.2-2.6,2.6-2.6h90.8c1.4,0,2.6,1.2,2.6,2.6v1.3 C98,73.5,96.8,74.7,95.4,74.7z" fill="#4A2F1D"/>
            </svg>
            <h2>The Hat is Deciding...</h2>
        </div>

        <div id="result-screen">
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- NEW: Element References for Entry Screen & Audio ---
        const entryScreen = document.getElementById('entry-screen');
        const backgroundMusic = document.getElementById('background-music');

        // --- Element References ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const ceremonyScreen = document.getElementById('ceremony-screen');
        const resultScreen = document.getElementById('result-screen');

        const startButton = document.getElementById('start-button');
        const questionTextEl = document.getElementById('question-text');
        const answerButtonsEl = document.getElementById('answer-buttons');

        // --- NEW: Event Listener for the Entry Screen ---
        entryScreen.addEventListener('click', () => {
            // Play the music (this is allowed because it's after a user click)
            backgroundMusic.play();
            
            // Add the 'hidden' class to trigger the fade-out animation
            entryScreen.classList.add('hidden');
        });


        // --- Quiz & House Data ---
        const questions = [
            {
                question: "Which path do you choose?",
                answers: [
                    { text: "The wide, sunny grassy path", house: 'hufflepuff' },
                    { text: "The narrow, dark, lantern-lit alley", house: 'slytherin' },
                    { text: "The twisting, leaf-strewn path through the woods", house: 'gryffindor' },
                    { text: "The cobbled street lined with ancient buildings", house: 'ravenclaw' }
                ]
            },
            {
                question: "Which magical creature do you find most fascinating?",
                answers: [
                    { text: "Phoenix", house: 'gryffindor' },
                    { text: "Griffin", house: 'ravenclaw' },
                    { text: "Niffler", house: 'hufflepuff' },
                    { text: "Basilisk", house: 'slytherin' }
                ]
            },
            {
                question: "What kind of instrument most pleases your ear?",
                answers: [
                    { text: "The violin", house: 'ravenclaw' },
                    { text: "The trumpet", house: 'gryffindor' },
                    { text: "The piano", house: 'hufflepuff' },
                    { text: "The drums", house: 'slytherin' }
                ]
            },
             {
                question: "You're locked in a room. What do you do?",
                answers: [
                    { text: "Look for a hidden key", house: 'ravenclaw' },
                    { text: "Try to pick the lock", house: 'slytherin' },
                    { text: "Kick the door down", house: 'gryffindor' },
                    { text: "Wait for someone to rescue you", house: 'hufflepuff' }
                ]
            },
            {
                question: "Which subject at Hogwarts would you excel at?",
                answers: [
                    { text: "Defence Against the Dark Arts", house: 'gryffindor' },
                    { text: "Potions", house: 'slytherin' },
                    { text: "Herbology", house: 'hufflepuff' },
                    { text: "Charms", house: 'ravenclaw' }
                ]
            }
        ];
        
        const houseData = {
            gryffindor: { name: "Gryffindor", crest: "Pics/gryffindor.png", motto: "Where dwell the brave at heart."},
            hufflepuff: { name: "Hufflepuff", crest: "Pics/hufflepuff1.png", motto: "Where they are just and loyal."},
            ravenclaw: { name: "Ravenclaw", crest: "Pics/ravenclaw.png", motto: "Where those of wit and learning will always find their kind."},
            slytherin: { name: "Slytherin", crest: "Pics/slyth.png", motto: "Where you'll make your real friends."}
        };

        let currentQuestionIndex = 0;
        let scores = { gryffindor: 0, hufflepuff: 0, ravenclaw: 0, slytherin: 0 };

        // --- Main Functions ---
        function startQuiz() {
            startScreen.style.display = 'none';
            quizScreen.style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const question = questions[currentQuestionIndex];
            questionTextEl.innerText = question.question;
            question.answers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.classList.add('answer-btn');
                button.dataset.house = answer.house;
                button.addEventListener('click', selectAnswer);
                answerButtonsEl.appendChild(button);
            });
        }

        function resetState() {
            while (answerButtonsEl.firstChild) {
                answerButtonsEl.removeChild(answerButtonsEl.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedHouse = e.target.dataset.house;
            scores[selectedHouse]++;

            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                showQuestion();
            } else {
                startCeremony();
            }
        }

        function startCeremony() {
            quizScreen.style.display = 'none';
            ceremonyScreen.style.display = 'block';
            setTimeout(showResult, 4000);
        }

        function showResult() {
            ceremonyScreen.style.display = 'none';

            let maxScore = -1;
            let winningHouses = [];
            for (const house in scores) {
                if (scores[house] > maxScore) {
                    maxScore = scores[house];
                    winningHouses = [house];
                } else if (scores[house] === maxScore) {
                    winningHouses.push(house);
                }
            }
            const finalHouseKey = winningHouses[Math.floor(Math.random() * winningHouses.length)];
            const finalHouseData = houseData[finalHouseKey];

            const houseCardHTML = `
                <div class="house-card" id="${finalHouseKey}-card">
                    <img src="${finalHouseData.crest}" alt="${finalHouseData.name} Crest" class="crest-image"
                         onerror="this.style.display='none'">
                    <h2>${finalHouseData.name}</h2>
                    <p class="motto">"${finalHouseData.motto}"</p>
                    <p>Welcome to your new home! You have the heart of a true ${finalHouseData.name}.</p>
                    <button id="retake-quiz-btn">Retake the Quiz</button>
                </div>`;
            resultScreen.innerHTML = houseCardHTML;
            resultScreen.style.display = 'block';

            resultScreen.querySelector('#retake-quiz-btn').addEventListener('click', retakeQuiz);
        }

        function retakeQuiz() {
            // Reset scores
            for (const house in scores) {
                scores[house] = 0;
            }
            currentQuestionIndex = 0;

            // Hide result screen and show start screen
            resultScreen.style.display = 'none';
            startScreen.style.display = 'block';
        }

        // --- Initial Event Listener ---
        startButton.addEventListener('click', startQuiz);
    });
</script>